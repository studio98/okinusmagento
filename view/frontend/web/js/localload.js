!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Okinus=t():e.Okinus=t()}(self,(function(){return function(){"use strict";var e={613:function(e,t,n){var i=n(758),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,'.okinus-modal{display:none}.okinus-vanilla-modal .okinus-modal{display:block;position:fixed;content:"";top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:-1;opacity:0;transition:opacity .2s,z-index 0s .2s;text-align:center;overflow:hidden;overflow-y:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.okinus-vanilla-modal .okinus-modal>*{display:inline-block;white-space:normal;vertical-align:middle;text-align:left}.okinus-vanilla-modal .okinus-modal:before{display:inline-block;overflow:hidden;width:0;height:100%;vertical-align:middle;content:""}.okinus-vanilla-modal .okinus-modal .okinus-modal-content{box-sizing:border-box;height:100%}.okinus-vanilla-modal.okinus-modal-visible .okinus-modal{z-index:99;opacity:1;transition:opacity .2s}.okinus-vanilla-modal.okinus-modal-maximize .okinus-modal-inner{max-width:95%;max-height:95%;height:100vh;width:100vw}.okinus-modal-inner{position:relative;overflow:hidden;max-width:90%;max-height:90%;height:75vh;width:600px;background:#fff;z-index:-1;opacity:0;transform:scale(0);transition:opacity .2s,transform .2s,z-index 0s .2s}.okinus-modal-visible .okinus-modal-inner{z-index:100;opacity:1;transform:scale(1);transition:opacity .2s,transform .2s}.okinus-modal-close{display:block;position:absolute;z-index:2;left:15px;top:15px;width:25px;height:20px}[data-okinus-modal-close]{display:block;width:20px;height:20px;line-height:20px;font-size:13px;cursor:pointer;text-align:center;color:#777}.okinus-vanilla-modal .okinus-iframe{width:100%;height:100%;border:0;display:block}',""]),t.Z=o},758:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(o[a]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},278:function(e,t,n){var i,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function r(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],l=t.base?r[0]+t.base:r[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=a(d),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:f(h,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var s=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function h(e,t,n){var i=n.css,o=n.media,s=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,m=0;function f(e,t){var n,i,o;if(t.singleton){var s=m++;n=p||(p=l(t)),i=u.bind(null,n,s,!1),o=u.bind(null,n,s,!0)}else n=l(t),i=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=a(n[i]);s[o].references--}for(var l=r(e,t),c=0;c<n.length;c++){var d=a(n[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=l}}}},872:function(e,t,n){n.d(t,{default:function(){return L}});var i=JSON.parse('{"application.cancel":"Are you sure you want to cancel your application process?","checkout.cancel":"Are you sure you want to cancel the checkout? You would need to restart it again if you do."}');const o={en:i};let s=i;const a=e=>s.hasOwnProperty(e)?s[e]:e,r=e=>{let t=document.createElement("iframe");return t.className="okinus-iframe",t.setAttribute("src",e),t};function l(e){console.error(`Okinus: ${e}`)}const c=(e,t)=>((e,t,n)=>{let i=function(e,t,n){void 0===n&&(n=!1);let i={...t};return new RegExp("{.*}","g").test(e)&&Object.keys(i).forEach((t=>{const o=i[t];e.search("{"+t+"}")>-1&&(e=e.replace("{"+t+"}",o),n&&delete i[t])})),{url:e,data:i}}(t,n,!0),o="";return i.data&&Object.keys(i.data).length>0&&(o=(e=>{if("string"==typeof e)return e;let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")})(i.data),o=-1===i.url.indexOf("?")?"?"+o:"&"+o),e+i.url+o})(e,"/apply-v2/{retailer_slug}/{store_slug}/initiate",t),d={modal:"okinus-modal",modalInner:"okinus-modal-inner",modalContent:"okinus-modal-content",open:"[data-okinus-modal-open]",close:"[data-okinus-modal-close]",closeContainer:"okinus-modal-close",page:"body",class:"okinus-modal-visible",loadClass:"okinus-vanilla-modal",maximizeClass:"okinus-modal-maximize",clickOutside:!0,closeKeys:[27],transitions:!0,transitionEnd:null,onBeforeOpen:null,onBeforeClose:null,onAfterClose:null,onOpen:null,onClose:null};function u(){const e=document.createElement("div");return(t=[{key:"transition",value:"transitionend"},{key:"OTransition",value:"otransitionend"},{key:"MozTransition",value:"transitionend"},{key:"WebkitTransition",value:"webkitTransitionEnd"}],n=({key:t})=>void 0!==e.style[t],e=>{const i=t.filter(n);return i[0]?i[0][e]:void 0})("value");var t,n}function h(e,t){e instanceof HTMLElement||l("Not a valid HTML element."),e.setAttribute("class",e.className.split(" ").filter((e=>e!==t)).concat(t).join(" "))}function p(e,t){e instanceof HTMLElement||l("Not a valid HTML element."),e.setAttribute("class",e.className.split(" ").filter((e=>e!==t)).join(" "))}function m(e,t){const n=(e.target.document||e.target.ownerDocument).querySelectorAll(t);for(let t=0;t<n.length;t+=1){let i=e.target;for(;i&&i!==document.body;){if(i===n[t])return i;i=i.parentNode}}return null}class f{constructor(e){this.isOpen=!1,this.current=null,this.isListening=!1,this.settings=function(e){return{...d,...e,transitionEnd:u()}}(e),this.dom=this.getDomNodes(),this.open=this.open.bind(this),this.close=this.close.bind(this),this.closeKeyHandler=this.closeKeyHandler.bind(this),this.outsideClickHandler=this.outsideClickHandler.bind(this),this.delegateOpen=this.delegateOpen.bind(this),this.delegateClose=this.delegateClose.bind(this),this.listen=this.listen.bind(this),this.destroy=this.destroy.bind(this),this.addLoadedCssClass(),this.listen()}getDomNodes(){const{modal:e,page:t,modalInner:n,modalContent:i,close:o,closeContainer:s}=this.settings;let a=document.createElement("div");a.className=e,a.setAttribute("tabindex","-1"),a.setAttribute("role","dialog"),a.setAttribute("id","OkinusModal");let r=document.createElement("div");r.className=n,r.setAttribute("role","document");let c=document.createElement("div");c.className=s;let d=document.createElement("a");d.setAttribute("data-okinus-modal-close","");let u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("viewBox","0 0 350 512");let h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("fill","currentColor"),h.setAttribute("d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z");let p=document.createElement("div");p.className=i,a.append(r),r.append(c),c.append(d),u.append(h),d.append(u),r.append(p);let m=function(e,t){const n=document.querySelector(e);return n||l(`${e} not found in document.`),n}(t);return m.appendChild(a),{modal:a,page:m,modalInner:r,modalContent:p}}addLoadedCssClass(){h(this.dom.page,this.settings.loadClass)}open(e,t){const{page:n}=this.dom,{onBeforeOpen:i,onOpen:o}=this.settings;if(this.current&&this.releaseNode(this.current),this.current=e,this.current instanceof HTMLElement!=0)return"function"==typeof i&&i.call(this,t),this.captureNode(this.current),h(n,this.settings.class),this.isOpen=!0,"function"==typeof o&&o.call(this,t),this;l("OkinusModal target must exist on page.")}detectTransition(){const{modal:e}=this.dom,t=window.getComputedStyle(e,null);return Boolean(["transitionDuration","oTransitionDuration","MozTransitionDuration","webkitTransitionDuration"].filter((e=>"string"==typeof t[e]&&parseFloat(t[e])>0)).length)}close(e){const{transitions:t,transitionEnd:n,onBeforeClose:i,onAfterClose:o}=this.settings,s=this.detectTransition();if(this.isOpen){if("function"==typeof i&&!1===i.call(this,e))return;this.isOpen=!1,p(this.dom.page,this.settings.class),t&&n&&s?this.closeModalWithTransition(e):this.closeModal(e),"function"==typeof o&&o.call(this,e)}return this}closeModal(e){const{onClose:t}=this.settings;this.releaseNode(this.current),this.isOpen=!1,this.current=null,"function"==typeof t&&t.call(this,e)}closeModalWithTransition(e){const{modal:t}=this.dom,{transitionEnd:n}=this.settings,i=()=>{t.removeEventListener(n,i),this.closeModal(e)};t.addEventListener(n,i)}captureNode(e){const{modalContent:t}=this.dom;t.appendChild(e)}releaseNode(e){e.remove()}closeKeyHandler(e){const{closeKeys:t}=this.settings;var n;n=t,"[object Array]"===Object.prototype.toString.call(n)&&n.length&&t.indexOf(e.which)>-1&&!0===this.isOpen&&(e.preventDefault(),this.close(e))}outsideClickHandler(e){const{clickOutside:t}=this.settings,{modalInner:n}=this.dom;if(t){let t=e.target;for(;t&&t!==document.body;){if(t===n)return;t=t.parentNode}this.close(e)}}delegateOpen(e){const{open:t}=this.settings,n=m(e,t);n&&(e.preventDefault(),this.open(n,e))}delegateClose(e){const{close:t}=this.settings;m(e,t)&&(e.preventDefault(),this.close(e))}listen(){const{modal:e}=this.dom;this.isListening?l("Event listeners already applied."):(e.addEventListener("click",this.outsideClickHandler,!1),document.addEventListener("keydown",this.closeKeyHandler,!1),document.addEventListener("click",this.delegateOpen,!1),document.addEventListener("click",this.delegateClose,!1),this.isListening=!0)}destroy(){const{modal:e}=this.dom;this.isListening?(this.close(),e.removeEventListener("click",this.outsideClickHandler),document.removeEventListener("keydown",this.closeKeyHandler),document.removeEventListener("click",this.delegateOpen),document.removeEventListener("click",this.delegateClose),this.isListening=!1):l("Event listeners already removed.")}maximize(){const{page:e}=this.dom;return h(e,this.settings.maximizeClass),this}minimize(){const{page:e}=this.dom;return p(e,this.settings.maximizeClass),this}}var g=n(278),v=n.n(g),b=n(613);v()(b.Z,{insert:"head",singleton:!1}),b.Z.locals;const y={baseUri:"https://apply.okinus.com",locale:"en",retailerSlug:null,storeSlug:null,debug:!1};let k;function w(e){k={...y,...k,...e},k.debug&&console.debug("Options set",k)}let x,C=null,O=null;const E=()=>x instanceof f?x:x=new f({onBeforeClose:()=>{if("function"==typeof C)return C.call()},onAfterClose:()=>{"function"==typeof O&&O({status:"close"})}});var L=e=>{var t;return w(e),t=k.locale,s=o.hasOwnProperty(t)?o[t]:o.en,window.addEventListener("message",(e=>{e.origin===k.baseUri&&(({status:e,step:t,data:n})=>{switch(k.debug&&console.debug("Process message",{status:e,step:t,data:n}),e){case"maximize":E().maximize();break;case"minimize":E().minimize();break;case"close":C=null,E().close();break;case"cancelled":case"error":E().close();default:"function"==typeof O&&e&&O({status:e,step:t,data:n})}})(e.data)}),!1),{apply(e){let t={retailer_slug:k.retailerSlug,store_slug:k.storeSlug,iframe:"true"};k.debug&&(t.debug="true");const n=c(k.baseUri,t);O=e,k.debug&&console.debug("Opening apply iframe",{url:n}),E().open(r(n)),C=()=>confirm(a("application.cancel"))},redirect(){let e={retailer_slug:k.retailerSlug,store_slug:k.storeSlug,iframe:"false"};k.debug&&(e.debug="true");const t=c(k.baseUri,e);return k.debug&&console.debug("Redirecting to apply url",{url:t}),t},checkout(e,t){k.debug&&console.debug("Opening checkout iframe",{url:e}),E().open(r(e)),O=t,C=()=>confirm(a("checkout.cancel"))},close(){E().close()},options(e){w(e)}}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var i=n(872);return i.default}()}));